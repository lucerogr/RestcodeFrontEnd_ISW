{"remainingRequest":"/Users/nuevo/Documents/all/APPLICACIONES-WEB/RestCodeFrontEnd_WebApplication-develop/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nuevo/Documents/all/APPLICACIONES-WEB/RestCodeFrontEnd_WebApplication-develop/src/components/categories.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nuevo/Documents/all/APPLICACIONES-WEB/RestCodeFrontEnd_WebApplication-develop/src/components/categories.vue","mtime":1606402293000},{"path":"/Users/nuevo/Documents/all/APPLICACIONES-WEB/RestCodeFrontEnd_WebApplication-develop/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nuevo/Documents/all/APPLICACIONES-WEB/RestCodeFrontEnd_WebApplication-develop/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/nuevo/Documents/all/APPLICACIONES-WEB/RestCodeFrontEnd_WebApplication-develop/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nuevo/Documents/all/APPLICACIONES-WEB/RestCodeFrontEnd_WebApplication-develop/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBDYXRlZ29yeVNlcnZpY2UgZnJvbSAnLi4vc2VydmljZXMvY2F0ZWdvcmllcy1zZXJ2aWNlJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJjYXRlZ29yaWVzIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2VhcmNoOiAnJywKICAgICAgZGlhbG9nOiBmYWxzZSwKICAgICAgZGlhbG9nRGVsZXRlOiBmYWxzZSwKICAgICAgaGVhZGVyczogWwogICAgICAgIHt0ZXh0OiAnSWQnLCB2YWx1ZTogJ2lkJ30sCiAgICAgICAge3RleHQ6ICdOb21icmUnLCB2YWx1ZTogJ25hbWUnfSwKICAgICAgICB7dGV4dDogJ0FjY2lvbmVzJywgdmFsdWU6ICdhY3Rpb25zJywgc29ydGFibGU6IGZhbHNlfQogICAgICBdLAogICAgICBjYXRlZ29yaWVzOiBbXSwKICAgICAgZGlzcGxheUNhdGVnb3JpZXM6IFtdLAogICAgICBlZGl0ZWRJbmRleDogLTEsCiAgICAgIGVkaXRlZEl0ZW06IHsKICAgICAgICBuYW1lOiAnJywKICAgICAgICByZXN0YXVyYW50SWQ6IDMwMQogICAgICB9LAogICAgICBkZWZhdWx0SXRlbTogewogICAgICAgIG5hbWU6ICcnLAogICAgICAgIHJlc3RhdXJhbnRJZDogMzAxCiAgICAgIH0sCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgZm9ybVRpdGxlKCkgewogICAgICByZXR1cm4gdGhpcy5lZGl0ZWRJbmRleCA9PT0gLTEgPyAnTnVldmEgQ2F0ZWdvcmlhJyA6ICdFZGl0YXIgQ2F0ZWdvcmlhJwogICAgfSwKICB9LAogIHdhdGNoOiB7CiAgICBkaWFsb2codmFsKSB7CiAgICAgIHZhbCB8fCB0aGlzLmNsb3NlKCkKICAgIH0sCiAgICBkaWFsb2dEZWxldGUodmFsKSB7CiAgICAgIHZhbCB8fCB0aGlzLmNsb3NlRGVsZXRlKCkKICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICByZXRyaWV2ZUNhdGVnb3JpZXMoKSB7CiAgICAgIENhdGVnb3J5U2VydmljZS5nZXRCeVJlc3RhdXJhbnRJZCh0aGlzLmVkaXRlZEl0ZW0ucmVzdGF1cmFudElkKQogICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICB0aGlzLmNhdGVnb3JpZXMgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICB0aGlzLmRpc3BsYXlDYXRlZ29yaWVzID0gcmVzcG9uc2UuZGF0YS5tYXAodGhpcy5nZXREaXNwbGF5Q2F0ZWdvcnkpOwogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgIH0pOwogICAgfSwKICAgIGdldERpc3BsYXlDYXRlZ29yeShjYXRlZ29yeSkgewogICAgICByZXR1cm4gewogICAgICAgIGlkOiBjYXRlZ29yeS5pZCwKICAgICAgICBuYW1lOiBjYXRlZ29yeS5uYW1lCiAgICAgIH07CiAgICB9LAogICAgcmVmcmVzaExpc3QoKSB7CiAgICAgIHRoaXMucmV0cmlldmVDYXRlZ29yaWVzKCk7CiAgICB9LAogICAgcmVtb3ZlQWxsQ2F0ZWdvcmllcygpIHsKICAgICAgQ2F0ZWdvcnlTZXJ2aWNlLmRlbGV0ZUFsbCgpCiAgICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICAgIHRoaXMucmVmcmVzaExpc3QoKTsKICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgICAgYWxlcnQoIlRoZSBCYWNrZW5kIGRvZXMgbm90IHN1cHBvcnQgdGhpcyBvcGVyYXRpb24uIik7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgICAgfSk7CiAgICB9LAogICAgZWRpdEl0ZW0oaXRlbSkgewogICAgICB0aGlzLmVkaXRlZEluZGV4ID0gdGhpcy5kaXNwbGF5Q2F0ZWdvcmllcy5pbmRleE9mKGl0ZW0pOwogICAgICBjb25zb2xlLmxvZyhpdGVtKTsKICAgICAgdGhpcy5lZGl0ZWRJdGVtID0gdGhpcy5jYXRlZ29yaWVzW3RoaXMuZWRpdGVkSW5kZXhdOwogICAgICB0aGlzLmRpYWxvZyA9IHRydWU7CiAgICB9LAogICAgZGVsZXRlSXRlbShpdGVtKSB7CiAgICAgIHRoaXMuZWRpdGVkSW5kZXggPSB0aGlzLmRpc3BsYXlDYXRlZ29yaWVzLmluZGV4T2YoaXRlbSk7CiAgICAgIHRoaXMuZWRpdGVkSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuY2F0ZWdvcmllc1t0aGlzLmVkaXRlZEluZGV4XSk7CiAgICAgIHRoaXMuZGlhbG9nRGVsZXRlID0gdHJ1ZTsKICAgIH0sCiAgICBkZWxldGVJdGVtQ29uZmlybSgpIHsKICAgICAgdGhpcy5kZWxldGVDYXRlZ29yeSh0aGlzLmVkaXRlZEl0ZW0uaWQpOwogICAgICB0aGlzLmNhdGVnb3JpZXMuc3BsaWNlKHRoaXMuZWRpdGVkSW5kZXgsIDEpOwogICAgICB0aGlzLmNsb3NlRGVsZXRlKCk7CiAgICB9LAogICAgY2xvc2UoKSB7CiAgICAgIHRoaXMuZGlhbG9nID0gZmFsc2UKICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIHRoaXMuZWRpdGVkSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZGVmYXVsdEl0ZW0pCiAgICAgICAgdGhpcy5lZGl0ZWRJbmRleCA9IC0xCiAgICAgIH0pCiAgICB9LAogICAgY2xvc2VEZWxldGUoKSB7CiAgICAgIHRoaXMuZGlhbG9nRGVsZXRlID0gZmFsc2UKICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIHRoaXMuZWRpdGVkSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZGVmYXVsdEl0ZW0pCiAgICAgICAgdGhpcy5lZGl0ZWRJbmRleCA9IC0xCiAgICAgIH0pCiAgICB9LAogICAgc2F2ZSgpIHsKICAgICAgaWYgKHRoaXMuZWRpdGVkSW5kZXggPiAtMSkgewogICAgICAgIHRoaXMuY2F0ZWdvcmllc1t0aGlzLmVkaXRlZEluZGV4XSA9IHRoaXMuZWRpdGVkSXRlbTsKICAgICAgICB0aGlzLmRpc3BsYXlDYXRlZ29yaWVzW3RoaXMuZWRpdGVkSW5kZXhdID0gdGhpcy5nZXREaXNwbGF5Q2F0ZWdvcnkodGhpcy5jYXRlZ29yaWVzW3RoaXMuZWRpdGVkSW5kZXhdKTsKICAgICAgICBDYXRlZ29yeVNlcnZpY2UudXBkYXRlKHRoaXMuZWRpdGVkSXRlbS5pZCwgdGhpcy5lZGl0ZWRJdGVtKQogICAgICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoTGlzdCgpOwogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goZSA9PiB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIENhdGVnb3J5U2VydmljZS5jcmVhdGUodGhpcy5lZGl0ZWRJdGVtKQogICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgbGV0IGl0ZW0gPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgIHRoaXMuY2F0ZWdvcmllcy5wdXNoKGl0ZW0pOwogICAgICAgICAgICAgIHRoaXMuZGlzcGxheUNhdGVnb3JpZXMucHVzaCh0aGlzLmdldERpc3BsYXlDYXRlZ29yeShpdGVtKSk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaChlID0+IHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgfSkKICAgICAgfQogICAgICB0aGlzLmNsb3NlKCkKICAgIH0sCiAgICBkZWxldGVDYXRlZ29yeShpZCkgewogICAgICBDYXRlZ29yeVNlcnZpY2UuZGVsZXRlKGlkKQogICAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgICB0aGlzLnJlZnJlc2hMaXN0KCk7CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgICAgfSk7CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5yZXRyaWV2ZUNhdGVnb3JpZXMoKTsKICB9Cn0K"},{"version":3,"sources":["categories.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"categories.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-card>\n    <v-card-title class=\"justify-center\">\n      ADMINISTRAR MIS CATEGORIAS\n    </v-card-title>\n    <v-col cols=\"12\" md=\"6\">\n      <v-text-field\n          v-model=\"search\"\n          append-icon=\"mdi-magnify\"\n          label=\"búsqueda\"\n          single-line\n          hide-details\n      ></v-text-field>\n    </v-col>\n    <v-card-text>\n      <v-data-table :headers=\"headers\" :items=\"displayCategories\" :items-per-page=\"15\" :search=\"search\"\n                    class=\"elevation-1\" ref=\"categoriesTable\">\n        <template v-slot:[`item.actions`]=\"{ item }\">\n          <v-icon small class=\"mr-2\" @click=\"editItem(item)\">mdi-pencil</v-icon>\n          <v-icon small @click=\"deleteItem(item)\">mdi-delete</v-icon>\n        </template>\n        <template v-slot:top>\n          <v-dialog v-model=\"dialog\" max-width=\"500px\">\n            <template v-slot:activator=\"{ on, attrs }\">\n              <v-btn color=\"#1bd698\" class=\"mb-2\" v-bind=\"attrs\" v-on=\"on\">Agregar Categoria</v-btn>\n            </template>\n            <v-card>\n              <v-card-title>\n                <span class=\"headline\">{{ formTitle }}</span>\n              </v-card-title>\n              <v-card-text>\n                <v-container>\n                  <v-row>\n                    <v-col cols=\"9\" sm=\"6\" md=\"20\">\n                      <v-text-field v-model=\"editedItem.name\" label=\"Nombre\"></v-text-field>\n                    </v-col>\n                  </v-row>\n                </v-container>\n              </v-card-text>\n              <v-card-actions>\n                <v-spacer></v-spacer>\n                <v-btn color=\"#1bd698\" text @click=\"close\">Cancelar</v-btn>\n                <v-btn color=\"#1bd698\" text @click=\"save\">Guardar</v-btn>\n              </v-card-actions>\n            </v-card>\n          </v-dialog>\n          <v-dialog v-model=\"dialogDelete\" max-width=\"500px\">\n            <v-card>\n              <v-card-title class=\"headline\">Eliminar categoria</v-card-title>\n              <v-card-text>\n                <p>¿Está seguro de querer eliminar la categoria <b>{{ editedItem.name }}?</b></p>\n              </v-card-text>\n              <v-card-actions>\n                <v-spacer></v-spacer>\n                <v-btn color=\"#1bd698\" text @click=\"closeDelete\">Cancelar</v-btn>\n                <v-btn color=\"#1bd698\" text @click=\"deleteItemConfirm\">Aceptar</v-btn>\n              </v-card-actions>\n            </v-card>\n          </v-dialog>\n        </template>\n      </v-data-table>\n    </v-card-text>\n  </v-card>\n</template>\n\n<script>\nimport CategoryService from '../services/categories-service';\nexport default {\n  name: \"categories\",\n  data() {\n    return {\n      search: '',\n      dialog: false,\n      dialogDelete: false,\n      headers: [\n        {text: 'Id', value: 'id'},\n        {text: 'Nombre', value: 'name'},\n        {text: 'Acciones', value: 'actions', sortable: false}\n      ],\n      categories: [],\n      displayCategories: [],\n      editedIndex: -1,\n      editedItem: {\n        name: '',\n        restaurantId: 301\n      },\n      defaultItem: {\n        name: '',\n        restaurantId: 301\n      },\n    }\n  },\n  computed: {\n    formTitle() {\n      return this.editedIndex === -1 ? 'Nueva Categoria' : 'Editar Categoria'\n    },\n  },\n  watch: {\n    dialog(val) {\n      val || this.close()\n    },\n    dialogDelete(val) {\n      val || this.closeDelete()\n    },\n  },\n  methods: {\n    retrieveCategories() {\n      CategoryService.getByRestaurantId(this.editedItem.restaurantId)\n          .then(response => {\n            this.categories = response.data;\n            this.displayCategories = response.data.map(this.getDisplayCategory);\n          })\n          .catch((e) => {\n            console.log(e);\n          });\n    },\n    getDisplayCategory(category) {\n      return {\n        id: category.id,\n        name: category.name\n      };\n    },\n    refreshList() {\n      this.retrieveCategories();\n    },\n    removeAllCategories() {\n      CategoryService.deleteAll()\n          .then(() => {\n            this.refreshList();\n          })\n          .catch((e) => {\n            alert(\"The Backend does not support this operation.\");\n            console.log(e);\n          });\n    },\n    editItem(item) {\n      this.editedIndex = this.displayCategories.indexOf(item);\n      console.log(item);\n      this.editedItem = this.categories[this.editedIndex];\n      this.dialog = true;\n    },\n    deleteItem(item) {\n      this.editedIndex = this.displayCategories.indexOf(item);\n      this.editedItem = Object.assign({}, this.categories[this.editedIndex]);\n      this.dialogDelete = true;\n    },\n    deleteItemConfirm() {\n      this.deleteCategory(this.editedItem.id);\n      this.categories.splice(this.editedIndex, 1);\n      this.closeDelete();\n    },\n    close() {\n      this.dialog = false\n      this.$nextTick(() => {\n        this.editedItem = Object.assign({}, this.defaultItem)\n        this.editedIndex = -1\n      })\n    },\n    closeDelete() {\n      this.dialogDelete = false\n      this.$nextTick(() => {\n        this.editedItem = Object.assign({}, this.defaultItem)\n        this.editedIndex = -1\n      })\n    },\n    save() {\n      if (this.editedIndex > -1) {\n        this.categories[this.editedIndex] = this.editedItem;\n        this.displayCategories[this.editedIndex] = this.getDisplayCategory(this.categories[this.editedIndex]);\n        CategoryService.update(this.editedItem.id, this.editedItem)\n            .then(() => {\n              this.refreshList();\n            })\n            .catch(e => {\n              console.log(e);\n            });\n      } else {\n        CategoryService.create(this.editedItem)\n            .then(response => {\n              let item = response.data;\n              this.categories.push(item);\n              this.displayCategories.push(this.getDisplayCategory(item));\n            })\n            .catch(e => {\n              console.log(e);\n            })\n      }\n      this.close()\n    },\n    deleteCategory(id) {\n      CategoryService.delete(id)\n          .then(() => {\n            this.refreshList();\n          })\n          .catch((e) => {\n            console.log(e);\n          });\n    }\n  },\n  mounted() {\n    this.retrieveCategories();\n  }\n}\n</script>\n\n<style scoped>\n</style>"]}]}