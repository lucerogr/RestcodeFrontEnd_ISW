{"remainingRequest":"/Users/nuevo/Documents/all/5th/APP WEB/APPLICACIONES-WEB/RestCodeFrontEnd_WebApplication-develop/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nuevo/Documents/all/5th/APP WEB/APPLICACIONES-WEB/RestCodeFrontEnd_WebApplication-develop/src/components/products.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nuevo/Documents/all/5th/APP WEB/APPLICACIONES-WEB/RestCodeFrontEnd_WebApplication-develop/src/components/products.vue","mtime":1606402293000},{"path":"/Users/nuevo/Documents/all/5th/APP WEB/APPLICACIONES-WEB/RestCodeFrontEnd_WebApplication-develop/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nuevo/Documents/all/5th/APP WEB/APPLICACIONES-WEB/RestCodeFrontEnd_WebApplication-develop/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/nuevo/Documents/all/5th/APP WEB/APPLICACIONES-WEB/RestCodeFrontEnd_WebApplication-develop/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nuevo/Documents/all/5th/APP WEB/APPLICACIONES-WEB/RestCodeFrontEnd_WebApplication-develop/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBQcm9kdWN0U2VydmljZSBmcm9tICcuLi9zZXJ2aWNlcy9wcm9kdWN0cy1zZXJ2aWNlJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJwcm9kdWN0cyIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNlYXJjaDogJycsCiAgICAgIGRpYWxvZzogZmFsc2UsCiAgICAgIGRpYWxvZ0RlbGV0ZTogZmFsc2UsCiAgICAgIGhlYWRlcnM6IFsKICAgICAgICB7dGV4dDogJ0lkJywgdmFsdWU6ICdpZCd9LAogICAgICAgIHt0ZXh0OiAnTm9tYnJlJywgdmFsdWU6ICduYW1lJ30sCiAgICAgICAge3RleHQ6ICdQcmVjaW8nLCB2YWx1ZTogJ3ByaWNlJ30sCiAgICAgICAge3RleHQ6ICdJZCBkZSBDYXRlZ29yaWEnLCB2YWx1ZTogJ2NhdGVnb3J5SWQnfSwKICAgICAgICB7dGV4dDogJ0FjY2lvbmVzJywgdmFsdWU6ICdhY3Rpb25zJywgc29ydGFibGU6IGZhbHNlfQogICAgICBdLAogICAgICBwcm9kdWN0czogW10sCiAgICAgIGRpc3BsYXlQcm9kdWN0czogW10sCiAgICAgIGVkaXRlZEluZGV4OiAtMSwKICAgICAgZWRpdGVkSXRlbTogewogICAgICAgIGlkOiAwLAogICAgICAgIG5hbWU6ICcnLAogICAgICAgIHByaWNlOiAwLjAsCiAgICAgICAgY2F0ZWdvcnlJZDogMAogICAgICB9LAogICAgICBkZWZhdWx0SXRlbTogewogICAgICAgIGlkOiAwLAogICAgICAgIG5hbWU6ICcnLAogICAgICAgIHByaWNlOiAwLjAsCiAgICAgICAgY2F0ZWdvcnlJZDogMAogICAgICB9LAogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGZvcm1UaXRsZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuZWRpdGVkSW5kZXggPT09IC0xID8gJ051ZXZvIFByb2R1Y3RvJyA6ICdFZGl0YXIgUHJvZHVjdG8nCiAgICB9LAogIH0sCiAgd2F0Y2g6IHsKICAgIGRpYWxvZyh2YWwpIHsKICAgICAgdmFsIHx8IHRoaXMuY2xvc2UoKQogICAgfSwKICAgIGRpYWxvZ0RlbGV0ZSh2YWwpIHsKICAgICAgdmFsIHx8IHRoaXMuY2xvc2VEZWxldGUoKQogICAgfSwKICB9LAogIG1ldGhvZHM6IHsKICAgIHJldHJpZXZlUHJvZHVjdHMoKSB7CiAgICAgIFByb2R1Y3RTZXJ2aWNlLmdldEFsbCgpCiAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgIHRoaXMucHJvZHVjdHMgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICB0aGlzLmRpc3BsYXlQcm9kdWN0cyA9IHJlc3BvbnNlLmRhdGEubWFwKHRoaXMuZ2V0RGlzcGxheVByb2R1Y3QpOwogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgIH0pOwogICAgfSwKICAgIGdldERpc3BsYXlQcm9kdWN0KHByb2R1Y3QpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBpZDogcHJvZHVjdC5pZCwKICAgICAgICBuYW1lOiBwcm9kdWN0Lm5hbWUsCiAgICAgICAgcHJpY2U6IHByb2R1Y3QucHJpY2UsCiAgICAgICAgY2F0ZWdvcnlJZDogcHJvZHVjdC5jYXRlZ29yeUlkCiAgICAgIH07CiAgICB9LAogICAgcmVmcmVzaExpc3QoKSB7CiAgICAgIHRoaXMucmV0cmlldmVQcm9kdWN0cygpOwogICAgfSwKICAgIHJlbW92ZUFsbFByb2R1Y3RzKCkgewogICAgICBQcm9kdWN0U2VydmljZS5kZWxldGVBbGwoKQogICAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgICB0aGlzLnJlZnJlc2hMaXN0KCk7CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKChlKSA9PiB7CiAgICAgICAgICAgIGFsZXJ0KCJUaGUgQmFja2VuZCBkb2VzIG5vdCBzdXBwb3J0IHRoaXMgb3BlcmF0aW9uLiIpOwogICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgIH0pOwogICAgfSwKICAgIGVkaXRJdGVtKGl0ZW0pIHsKICAgICAgdGhpcy5lZGl0ZWRJbmRleCA9IHRoaXMuZGlzcGxheVByb2R1Y3RzLmluZGV4T2YoaXRlbSk7CiAgICAgIGNvbnNvbGUubG9nKGl0ZW0pOwogICAgICB0aGlzLmVkaXRlZEl0ZW0gPSB0aGlzLnByb2R1Y3RzW3RoaXMuZWRpdGVkSW5kZXhdOwogICAgICB0aGlzLmRpYWxvZyA9IHRydWU7CiAgICB9LAogICAgZGVsZXRlSXRlbShpdGVtKSB7CiAgICAgIHRoaXMuZWRpdGVkSW5kZXggPSB0aGlzLmRpc3BsYXlQcm9kdWN0cy5pbmRleE9mKGl0ZW0pOwogICAgICB0aGlzLmVkaXRlZEl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnByb2R1Y3RzW3RoaXMuZWRpdGVkSW5kZXhdKTsKICAgICAgdGhpcy5kaWFsb2dEZWxldGUgPSB0cnVlOwogICAgfSwKICAgIGRlbGV0ZUl0ZW1Db25maXJtKCkgewogICAgICB0aGlzLmRlbGV0ZVByb2R1Y3QodGhpcy5lZGl0ZWRJdGVtLmlkKTsKICAgICAgdGhpcy5wcm9kdWN0cy5zcGxpY2UodGhpcy5lZGl0ZWRJbmRleCwgMSk7CiAgICAgIHRoaXMuY2xvc2VEZWxldGUoKTsKICAgIH0sCiAgICBjbG9zZSgpIHsKICAgICAgdGhpcy5kaWFsb2cgPSBmYWxzZQogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgdGhpcy5lZGl0ZWRJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5kZWZhdWx0SXRlbSkKICAgICAgICB0aGlzLmVkaXRlZEluZGV4ID0gLTEKICAgICAgfSkKICAgIH0sCiAgICBjbG9zZURlbGV0ZSgpIHsKICAgICAgdGhpcy5kaWFsb2dEZWxldGUgPSBmYWxzZQogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgdGhpcy5lZGl0ZWRJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5kZWZhdWx0SXRlbSkKICAgICAgICB0aGlzLmVkaXRlZEluZGV4ID0gLTEKICAgICAgfSkKICAgIH0sCiAgICBzYXZlKCkgewogICAgICBpZiAodGhpcy5lZGl0ZWRJbmRleCA+IC0xKSB7CiAgICAgICAgdGhpcy5wcm9kdWN0c1t0aGlzLmVkaXRlZEluZGV4XSA9IHRoaXMuZWRpdGVkSXRlbTsKICAgICAgICB0aGlzLmRpc3BsYXlQcm9kdWN0c1t0aGlzLmVkaXRlZEluZGV4XSA9IHRoaXMuZ2V0RGlzcGxheVByb2R1Y3QodGhpcy5wcm9kdWN0c1t0aGlzLmVkaXRlZEluZGV4XSk7CiAgICAgICAgUHJvZHVjdFNlcnZpY2UudXBkYXRlKHRoaXMuZWRpdGVkSXRlbS5pZCwgdGhpcy5lZGl0ZWRJdGVtKQogICAgICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoTGlzdCgpOwogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goZSA9PiB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIFByb2R1Y3RTZXJ2aWNlLmNyZWF0ZSh0aGlzLmVkaXRlZEl0ZW0pCiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICBsZXQgaXRlbSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0cy5wdXNoKGl0ZW0pOwogICAgICAgICAgICAgIHRoaXMuZGlzcGxheVByb2R1Y3RzLnB1c2godGhpcy5nZXREaXNwbGF5UHJvZHVjdChpdGVtKSk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaChlID0+IHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgICAgfSkKICAgICAgfQogICAgICB0aGlzLmNsb3NlKCkKICAgIH0sCiAgICBkZWxldGVQcm9kdWN0KGlkKSB7CiAgICAgIFByb2R1Y3RTZXJ2aWNlLmRlbGV0ZShpZCkKICAgICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgICAgdGhpcy5yZWZyZXNoTGlzdCgpOwogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgIH0pOwogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMucmV0cmlldmVQcm9kdWN0cygpOwogIH0KfQo="},{"version":3,"sources":["products.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"products.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-card>\n    <v-card-title class=\"justify-center\">\n      ADMINISTRAR MIS PRODUCTOS\n    </v-card-title>\n    <v-col cols=\"12\" md=\"6\">\n      <v-text-field\n          v-model=\"search\"\n          append-icon=\"mdi-magnify\"\n          label=\"búsqueda\"\n          single-line\n          hide-details\n      ></v-text-field>\n    </v-col>\n    <v-card-text>\n      <v-data-table :headers=\"headers\" :items=\"displayProducts\" :items-per-page=\"15\" :search=\"search\"\n                    class=\"elevation-1\" ref=\"productsTable\">\n        <template v-slot:[`item.actions`]=\"{ item }\">\n          <v-icon small class=\"mr-2\" @click=\"editItem(item)\">mdi-pencil</v-icon>\n          <v-icon small @click=\"deleteItem(item)\">mdi-delete</v-icon>\n        </template>\n        <template v-slot:top>\n          <v-dialog v-model=\"dialog\" max-width=\"500px\">\n            <template v-slot:activator=\"{ on, attrs }\">\n              <v-btn color=\"#1bd698\" class=\"mb-2\" v-bind=\"attrs\" v-on=\"on\">Agregar Producto</v-btn>\n            </template>\n            <v-card>\n              <v-card-title>\n                <span class=\"headline\">{{ formTitle }}</span>\n              </v-card-title>\n              <v-card-text>\n                <v-container>\n                  <v-row>\n                    <v-col cols=\"9\" sm=\"6\" md=\"20\">\n                      <v-text-field v-model=\"editedItem.name\" label=\"Nombre\"></v-text-field>\n                    </v-col>\n                    <v-col cols=\"9\" sm=\"6\" md=\"20\">\n                      <v-text-field v-model.number=\"editedItem.price\" label=\"Precio\"></v-text-field>\n                    </v-col>\n                    <v-col cols=\"9\" sm=\"6\" md=\"20\">\n                      <v-text-field v-model.number=\"editedItem.categoryId\" label=\"Id de Categoria\"></v-text-field>\n                    </v-col>\n                  </v-row>\n                </v-container>\n              </v-card-text>\n              <v-card-actions>\n                <v-spacer></v-spacer>\n                <v-btn color=\"#1bd698\" text @click=\"close\">Cancelar</v-btn>\n                <v-btn color=\"#1bd698\" text @click=\"save\">Guardar</v-btn>\n              </v-card-actions>\n            </v-card>\n          </v-dialog>\n          <v-dialog v-model=\"dialogDelete\" max-width=\"500px\">\n            <v-card>\n              <v-card-title class=\"headline\">Eliminar producto</v-card-title>\n              <v-card-text>\n                <p>¿Está seguro de querer eliminar el producto <b>{{ editedItem.name }}?</b></p>\n              </v-card-text>\n              <v-card-actions>\n                <v-spacer></v-spacer>\n                <v-btn color=\"#1bd698\" text @click=\"closeDelete\">Cancelar</v-btn>\n                <v-btn color=\"#1bd698\" text @click=\"deleteItemConfirm\">Aceptar</v-btn>\n              </v-card-actions>\n            </v-card>\n          </v-dialog>\n        </template>\n      </v-data-table>\n    </v-card-text>\n  </v-card>\n</template>\n\n<script>\nimport ProductService from '../services/products-service';\nexport default {\n  name: \"products\",\n  data() {\n    return {\n      search: '',\n      dialog: false,\n      dialogDelete: false,\n      headers: [\n        {text: 'Id', value: 'id'},\n        {text: 'Nombre', value: 'name'},\n        {text: 'Precio', value: 'price'},\n        {text: 'Id de Categoria', value: 'categoryId'},\n        {text: 'Acciones', value: 'actions', sortable: false}\n      ],\n      products: [],\n      displayProducts: [],\n      editedIndex: -1,\n      editedItem: {\n        id: 0,\n        name: '',\n        price: 0.0,\n        categoryId: 0\n      },\n      defaultItem: {\n        id: 0,\n        name: '',\n        price: 0.0,\n        categoryId: 0\n      },\n    }\n  },\n  computed: {\n    formTitle() {\n      return this.editedIndex === -1 ? 'Nuevo Producto' : 'Editar Producto'\n    },\n  },\n  watch: {\n    dialog(val) {\n      val || this.close()\n    },\n    dialogDelete(val) {\n      val || this.closeDelete()\n    },\n  },\n  methods: {\n    retrieveProducts() {\n      ProductService.getAll()\n          .then(response => {\n            this.products = response.data;\n            this.displayProducts = response.data.map(this.getDisplayProduct);\n          })\n          .catch((e) => {\n            console.log(e);\n          });\n    },\n    getDisplayProduct(product) {\n      return {\n        id: product.id,\n        name: product.name,\n        price: product.price,\n        categoryId: product.categoryId\n      };\n    },\n    refreshList() {\n      this.retrieveProducts();\n    },\n    removeAllProducts() {\n      ProductService.deleteAll()\n          .then(() => {\n            this.refreshList();\n          })\n          .catch((e) => {\n            alert(\"The Backend does not support this operation.\");\n            console.log(e);\n          });\n    },\n    editItem(item) {\n      this.editedIndex = this.displayProducts.indexOf(item);\n      console.log(item);\n      this.editedItem = this.products[this.editedIndex];\n      this.dialog = true;\n    },\n    deleteItem(item) {\n      this.editedIndex = this.displayProducts.indexOf(item);\n      this.editedItem = Object.assign({}, this.products[this.editedIndex]);\n      this.dialogDelete = true;\n    },\n    deleteItemConfirm() {\n      this.deleteProduct(this.editedItem.id);\n      this.products.splice(this.editedIndex, 1);\n      this.closeDelete();\n    },\n    close() {\n      this.dialog = false\n      this.$nextTick(() => {\n        this.editedItem = Object.assign({}, this.defaultItem)\n        this.editedIndex = -1\n      })\n    },\n    closeDelete() {\n      this.dialogDelete = false\n      this.$nextTick(() => {\n        this.editedItem = Object.assign({}, this.defaultItem)\n        this.editedIndex = -1\n      })\n    },\n    save() {\n      if (this.editedIndex > -1) {\n        this.products[this.editedIndex] = this.editedItem;\n        this.displayProducts[this.editedIndex] = this.getDisplayProduct(this.products[this.editedIndex]);\n        ProductService.update(this.editedItem.id, this.editedItem)\n            .then(() => {\n              this.refreshList();\n            })\n            .catch(e => {\n              console.log(e);\n            });\n      } else {\n        ProductService.create(this.editedItem)\n            .then(response => {\n              let item = response.data;\n              this.products.push(item);\n              this.displayProducts.push(this.getDisplayProduct(item));\n            })\n            .catch(e => {\n              console.log(e);\n            })\n      }\n      this.close()\n    },\n    deleteProduct(id) {\n      ProductService.delete(id)\n          .then(() => {\n            this.refreshList();\n          })\n          .catch((e) => {\n            console.log(e);\n          });\n    }\n  },\n  mounted() {\n    this.retrieveProducts();\n  }\n}\n</script>\n\n<style scoped>\n</style>"]}]}