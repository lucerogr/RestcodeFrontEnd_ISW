{"remainingRequest":"/Users/nuevo/Documents/all/5th/APP WEB/APPLICACIONES-WEB/RestCodeFrontEnd_WebApplication-develop/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nuevo/Documents/all/5th/APP WEB/APPLICACIONES-WEB/RestCodeFrontEnd_WebApplication-develop/src/components/sign-in.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nuevo/Documents/all/5th/APP WEB/APPLICACIONES-WEB/RestCodeFrontEnd_WebApplication-develop/src/components/sign-in.vue","mtime":1606402293000},{"path":"/Users/nuevo/Documents/all/5th/APP WEB/APPLICACIONES-WEB/RestCodeFrontEnd_WebApplication-develop/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nuevo/Documents/all/5th/APP WEB/APPLICACIONES-WEB/RestCodeFrontEnd_WebApplication-develop/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nuevo/Documents/all/5th/APP WEB/APPLICACIONES-WEB/RestCodeFrontEnd_WebApplication-develop/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/nuevo/Documents/all/5th/APP WEB/APPLICACIONES-WEB/RestCodeFrontEnd_WebApplication-develop/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nuevo/Documents/all/5th/APP WEB/APPLICACIONES-WEB/RestCodeFrontEnd_WebApplication-develop/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBPd25lcnNTZXJ2aWNlIGZyb20gIkAvc2VydmljZXMvb3duZXJzLXNlcnZpY2UiOwppbXBvcnQgQ29uc3VsdGFudHNTZXJ2aWNlIGZyb20gIkAvc2VydmljZXMvY29uc3VsdGFudHMtc2VydmljZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAic2lnbi1pbiIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGVtYWlsOiBudWxsLAogICAgICBwYXNzd29yZDogbnVsbCwKICAgICAgaXNWYWxpZDogdHJ1ZSwKICAgICAgZm91bmQ6IGZhbHNlLAogICAgICBvd25lcnM6IFtdLAogICAgICB0ZXN0OiAnJywKICAgICAgY29uc3VsdGFudHM6IFtdCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBuYXZpZ2F0ZVRvU2lnblVwKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCAoe25hbWU6ICdzaWduLXVwJ30pOwogICAgfSwKICAgIHJldHJpZXZlT3duZXJzKCkgewogICAgICBPd25lcnNTZXJ2aWNlLmdldEFsbE93bmVycygpCiAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgIHRoaXMub3duZXJzID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgaWYgKHRoaXMub3duZXJzLnNvbWUoaXRlbSA9PiBpdGVtLmVtYWlsID09PSB0aGlzLmVtYWlsICYmIGl0ZW0ucGFzc3dvcmQgPT09IHRoaXMucGFzc3dvcmQpKSB7CiAgICAgICAgICAgICAgdGhpcy5uYXZpZ2F0ZVRvSG9tZU93bmVyKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goKGUpID0+IHsKICAgICAgICAgICAgY29uc29sZS5sb2coZSk7CiAgICAgICAgICB9KTsKICAgIH0sCiAgICBnZXREaXNwbGF5T3duZXIob3duZXIpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBlbWFpbDogb3duZXIuZW1haWwsCiAgICAgICAgcGFzc3dvcmQ6IG93bmVyLnBhc3N3b3JkCiAgICAgIH07CiAgICB9LAogICAgcmV0cmlldmVDb25zdWx0YW50cygpIHsKICAgICAgQ29uc3VsdGFudHNTZXJ2aWNlLmdldEFsbENvbnN1bHRhbnRzKCkKICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgdGhpcy5jb25zdWx0YW50cyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgIGlmICh0aGlzLmNvbnN1bHRhbnRzLnNvbWUoaXRlbSA9PiBpdGVtLmVtYWlsID09PSB0aGlzLmVtYWlsICYmIGl0ZW0ucGFzc3dvcmQgPT09IHRoaXMucGFzc3dvcmQpKSB7CiAgICAgICAgICAgICAgdGhpcy5mb3VuZCA9IHRydWU7CiAgICAgICAgICAgICAgdGhpcy5uYXZpZ2F0ZVRvSG9tZUNvbnN1bHRhbnQoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaCgoZSkgPT4gewogICAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgIH0pOwogICAgfSwKICAgIGxvZ2luKCkgewogICAgICB0aGlzLnJldHJpZXZlQ29uc3VsdGFudHMoKTsKICAgICAgaWYgKCF0aGlzLmZvdW5kKSB7CiAgICAgICAgdGhpcy5yZXRyaWV2ZU93bmVycygpOwogICAgICB9CiAgICB9LAogICAgbmF2aWdhdGVUb0hvbWVPd25lcigpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2ggKHtuYW1lOiAnaG9tZS1vd25lcid9KTsKICAgIH0sCiAgICBuYXZpZ2F0ZVRvSG9tZUNvbnN1bHRhbnQoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoICh7bmFtZTogJ2hvbWUtY29uc3VsdGFudCd9KTsKICAgIH0sCiAgfQp9Cg=="},{"version":3,"sources":["sign-in.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"sign-in.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-card>\n    <v-card-title>\n      Iniciar Sesión\n    </v-card-title>\n    <v-card-list></v-card-list>\n    <v-card-text>\n      <v-form v-model=\"isValid\">\n        <v-text-field\n            label=\"E-mail\"\n            v-model=\"email\"\n            :rules=\"[v => !!v || 'Se requiere su E-mail']\"\n            required>\n        </v-text-field>\n        <v-text-field\n            label=\"Password\"\n            v-model=\"password\"\n            type=\"password\"\n            :rules=\"[v => !!v || 'Se requiere su contraseña']\"\n            required>\n        </v-text-field>\n      </v-form>\n    </v-card-text>\n    <v-card-actions>\n      <v-btn\n          color=\"primary\"\n          :disabled=\"!isValid\"\n          @click=\"login\"\n      >Login</v-btn>\n    </v-card-actions>\n    <v-row>\n      <v-col cols=\"12\">\n        <v-row>\n          <v-col cols=\"4\"></v-col>\n          <v-col cols=\"4\">\n            <v-text class=\"link\" @click=\"navigateToSignUp\">¿Aún no tienes una cuenta? ¡Regístrate! {{ test }}</v-text>\n          </v-col>\n          <v-col cols=\"4\"></v-col>\n        </v-row>\n      </v-col>\n    </v-row>\n  </v-card>\n</template>\n\n<script>\nimport OwnersService from \"@/services/owners-service\";\nimport ConsultantsService from \"@/services/consultants-service\";\nexport default {\n  name: \"sign-in\",\n  data() {\n    return {\n      email: null,\n      password: null,\n      isValid: true,\n      found: false,\n      owners: [],\n      test: '',\n      consultants: []\n    }\n  },\n  methods: {\n    navigateToSignUp() {\n      this.$router.push ({name: 'sign-up'});\n    },\n    retrieveOwners() {\n      OwnersService.getAllOwners()\n          .then(response => {\n            this.owners = response.data;\n            if (this.owners.some(item => item.email === this.email && item.password === this.password)) {\n              this.navigateToHomeOwner();\n            }\n          })\n          .catch((e) => {\n            console.log(e);\n          });\n    },\n    getDisplayOwner(owner) {\n      return {\n        email: owner.email,\n        password: owner.password\n      };\n    },\n    retrieveConsultants() {\n      ConsultantsService.getAllConsultants()\n          .then(response => {\n            this.consultants = response.data;\n            if (this.consultants.some(item => item.email === this.email && item.password === this.password)) {\n              this.found = true;\n              this.navigateToHomeConsultant();\n            }\n          })\n          .catch((e) => {\n            console.log(e);\n          });\n    },\n    login() {\n      this.retrieveConsultants();\n      if (!this.found) {\n        this.retrieveOwners();\n      }\n    },\n    navigateToHomeOwner() {\n      this.$router.push ({name: 'home-owner'});\n    },\n    navigateToHomeConsultant() {\n      this.$router.push ({name: 'home-consultant'});\n    },\n  }\n}\n</script>\n\n<style scoped>\n.link {\n  text-decoration: underline;\n  cursor: pointer;\n}\n</style>"]}]}